# Deadline Task Board

Система управления задачами с дедлайнами и системой заказов для фрилансеров.

## Функциональность

### Основные возможности
- **Управление задачами**: Создание, редактирование, удаление задач с приоритетами и дедлайнами
- **Канбан-доски**: Визуальное управление задачами через drag-and-drop интерфейс
- **Система ролей**: Заказчики и исполнители с разными правами доступа
- **Система заказов**: Заказчики создают заказы, исполнители предлагают свои услуги
- **Предложения**: Исполнители могут отправлять предложения по заказам
- **Управление пользователями**: Регистрация, аутентификация, профили пользователей
- **Административная панель**: Управление системой для администраторов

### Роли пользователей

#### Заказчик (Customer)
- Создание заказов с описанием, бюджетом и дедлайном
- Просмотр предложений от исполнителей
- Принятие/отклонение предложений
- Управление статусами заказов (открыт, в работе, завершен, отменен)
- Просмотр статистики по своим заказам

#### Исполнитель (Executor)
- Просмотр доступных заказов
- Отправка предложений с ценой и сроком выполнения
- Управление своими предложениями
- Выполнение принятых заказов
- Просмотр статистики по предложениям

#### Администратор (Admin)
- Полный доступ к системе
- Управление пользователями
- Модерация заказов и предложений
- Просмотр системной статистики

## Технологии

### Backend
- **FastAPI** - современный веб-фреймворк для Python
- **SQLAlchemy** - ORM для работы с базой данных
- **PostgreSQL** - реляционная база данных
- **Alembic** - миграции базы данных
- **JWT** - аутентификация пользователей
- **Pydantic** - валидация данных

### Frontend
- **React** - библиотека для создания пользовательских интерфейсов
- **React Router** - маршрутизация
- **Tailwind CSS** - CSS фреймворк для стилизации
- **Axios** - HTTP клиент для API запросов
- **React Hook Form** - управление формами
- **Lucide React** - иконки

### Telegram Bot
- **aiogram** - асинхронная библиотека для Telegram Bot API
- **Интеграция с веб-приложением** - привязка аккаунтов через код
- **Управление заказами и задачами** - прямо из Telegram
- **Уведомления** - о новых заказах, сообщениях и статусах

## Установка и запуск

### Требования
- Docker и Docker Compose
- Git

### Быстрый запуск с Docker

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd deadline-task-board
```

2. Настройте переменные окружения:
```bash
# Скопируйте пример файла переменных окружения
cp env.example .env

# Отредактируйте .env с вашими настройками
# ОБЯЗАТЕЛЬНО добавьте:
# - TELEGRAM_BOT_TOKEN (получите у @BotFather)
# - SECRET_KEY (сгенерируйте криптографически стойкий ключ)
# - POSTGRES_PASSWORD (сильный пароль для БД)

# ВАЖНО: Никогда не коммитьте .env файл в git!
```

3. Запустите все сервисы:
```bash
docker-compose up -d
```

4. Откройте приложение:
- Frontend: http://localhost:3000
- API: http://localhost:8000
- Swagger UI: http://localhost:8000/docs

### Настройка туннеля (для внешнего доступа)

Для доступа к приложению из интернета используйте туннели:

#### Cloudflare Tunnel (рекомендуется)
```bash
# Установите cloudflared
# Создайте туннель и настройте домен
# Обновите ALLOWED_ORIGINS в backend/.env
```

#### Ngrok
```bash
ngrok http 80
```

### Ручная установка

#### Backend
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или venv\Scripts\activate  # Windows
pip install -r requirements.txt
cp .env.example .env
# Настройте .env
python run.py
```

#### Frontend
```bash
cd web-app
npm install
cp .env.example .env
# Настройте .env
npm start
```

### Frontend

1. Перейдите в папку frontend:
```bash
cd ../web-app
```

2. Установите зависимости:
```bash
npm install
```

3. Создайте файл .env:
```bash
REACT_APP_API_URL=http://localhost:8000/api/v1
```

4. Запустите приложение:
```bash
npm start
```

### Docker

Для запуска через Docker:

```bash
docker-compose up -d
```

**Важно:** При первом запуске Docker автоматически:
- Применит все миграции Alembic (включая новые таблицы для заказов и предложений)
- Создаст тестовых пользователей (executor и customer)
- Обновит роли существующих пользователей

Для проверки статуса миграций:
```bash
docker exec deadline_task_board_api python scripts/check_migrations.py
```

## API Endpoints

### Аутентификация
- `POST /api/v1/auth/register` - Регистрация пользователя
- `POST /api/v1/auth/login` - Вход в систему
- `GET /api/v1/auth/me` - Получение информации о текущем пользователе

### Заказы
- `GET /api/v1/orders` - Получение всех заказов (админ)
- `GET /api/v1/orders/open` - Получение открытых заказов (исполнители)
- `GET /api/v1/orders/my` - Получение заказов пользователя
- `POST /api/v1/orders` - Создание заказа (заказчики)
- `GET /api/v1/orders/{id}` - Получение заказа по ID
- `PUT /api/v1/orders/{id}` - Обновление заказа
- `DELETE /api/v1/orders/{id}` - Удаление заказа
- `POST /api/v1/orders/{id}/complete` - Завершение заказа
- `POST /api/v1/orders/{id}/cancel` - Отмена заказа

### Предложения
- `GET /api/v1/proposals/my` - Получение предложений пользователя
- `GET /api/v1/proposals/pending` - Получение ожидающих предложений
- `GET /api/v1/proposals/order/{order_id}` - Получение предложений по заказу
- `POST /api/v1/proposals` - Создание предложения (исполнители)
- `PUT /api/v1/proposals/{id}` - Обновление предложения
- `POST /api/v1/proposals/{id}/accept` - Принятие предложения
- `POST /api/v1/proposals/{id}/reject` - Отклонение предложения
- `POST /api/v1/proposals/{id}/withdraw` - Отзыв предложения

### Задачи и доски
- `GET /api/v1/boards` - Получение досок пользователя
- `POST /api/v1/boards` - Создание доски
- `GET /api/v1/tasks` - Получение задач
- `POST /api/v1/tasks` - Создание задачи
- `PUT /api/v1/tasks/{id}` - Обновление задачи

## Структура проекта

```
deadline-task-board/
├── backend/
│   ├── app/
│   │   ├── api/           # API endpoints
│   │   ├── auth/          # Аутентификация
│   │   ├── crud/          # CRUD операции
│   │   ├── models/        # Модели базы данных
│   │   └── schemas/       # Pydantic схемы
│   ├── alembic/           # Миграции базы данных
│   └── requirements.txt
├── web-app/
│   ├── src/
│   │   ├── components/    # React компоненты
│   │   ├── pages/         # Страницы приложения
│   │   ├── services/      # API сервисы
│   │   └── types/         # TypeScript типы
│   └── package.json
└── docker-compose.yml
```

## Лицензия

MIT License 